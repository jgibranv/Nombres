<!DOCTYPE>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Nombres Pa' Mijo</title>
    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
  </head>
<body>

<br>
<div class="container-fluid">
	<div class="card">
		<div class="card-heading" style="background-color: #74cc39;">
			Vázquez Bailón
		</div>
		<div class="card-body">
			<div id="nombres"></div>
		</div>
	</div>
</div>
<br>
<div class="container-fluid">
	<div class="card">
		<div class="card card-heading" style="background-color: #34ebc3">
			Combinaciones
		</div>
		<div class="card-body">
			<table class="table table-striped table-hover table-bordered" id="combinaciones">
				<thead>
					<th style="width: 10%">#</th>
					<th>Primer Nombre</th>
					<th>Segundo Nombre</th>
					<th style="width: 30%">Boton</th>
				</thead>
				<tbody></tbody>
			</table>
		</div>
	</div>
</div>

<script type="text/javascript">
const arrNombres = ["Dante", "Magnus", "Kurt", "Franz", "Marco", "Dominik", "Drago", "Jurgen", "Leo", "Bastian", "Ezzio", 
	"Drakken", "Bjorn", "Anton", "Giovanni", "Luka", "Ander", "Nico", "Nicolas", "Tiago", "Bruno"];
arrNombres.sort();

class CombiUni {
	constructor(nombre) {
		this.nombre = nombre;
		this.activo = true;
	}
	mostrar() {
		return this.nombre + " Vázquez Bailón";
	}
}

class CombiDuo {
	constructor(pNombre, sNombre) {
		this.pNombre = pNombre;
		this.sNombre = sNombre;
		this.primerOrdenActivo = true;
		this.segundoOrdenActivo = true;
	}
	mostrar() {
		console.log(this.pNombre + " " + this.sNombre + " Vázquez Bailón");
	}
	mostrar_inversion() {
		console.log(this.sNombre + " " + this.pNombre + " Vázquez Bailón");
	}
}

const arrCombi = [];

// Agrega los primeros nombres unicos al arreglo de objetos arrCombi
arrNombres.forEach(function(nombre, indice){
	arrCombi[indice] = new CombiUni(nombre);
});

// Agrega las combinaciones al arreglo arrCombi
// El total de objetos agregados es igual al total de nombres * total de nombres menos uno entre dos. n*(n-1)/2
// Esto con el fin de evitar incluir combinaciones repetidas (en las combinaciones no importa el orden de los elementos)
for (var i=0; i<arrNombres.length; i++) {
	for (var j=0; j<arrNombres.length; j++) {
		if ( j > i ) { // Esta expresion evita que se repitan los elementos
			arrCombi.push(new CombiDuo(arrNombres[i], arrNombres[j]));
		}
	}
}

// console.log(arrCombi);
// console.log(arrCombi[230].pNombre);

// Muestra los nombres en el card
stringNombres = arrNombres.join(', ');
document.getElementById("nombres").innerHTML = stringNombres;

var tabla = document.getElementById("combinaciones");

arrCombi.forEach(function(objeto, indice){
	var row = tabla.insertRow(-1);
	row.id = "tr"+indice;
	var celda1 = row.insertCell(0);
	var celda2 = row.insertCell(1);
	var celda3 = row.insertCell(2);
	var celda4 = row.insertCell(3);
	celda1.innerHTML = indice+1+ " <button type='button' id='cambiaOrden"+indice+"' class='cambio btn btn-light bi bi-arrow-left-right'></button> ";

	if (objeto instanceof CombiUni){
		celda2.innerHTML = objeto.nombre;
		celda3.innerHTML = " ";
		if(objeto.activo) {
			celda4.innerHTML = "<button type='button' id='activador"+indice+"' class='btn btn-outline-danger btn-sm'>Rechazar</button>";
		} else {
			celda4.innerHTML = "<button type='button' id='activador"+indice+"' class='btn btn-outline-success btn-sm'>Activar</button>";
		}
	}
	if (objeto instanceof CombiDuo){
		celda2.innerHTML = objeto.pNombre;
		celda3.innerHTML = objeto.sNombre;
		celda4.innerHTML = objeto.primerOrdenActivo;
		var contCelda4 = "";
		if(objeto.primerOrdenActivo) {
			contCelda4 += " <button type='button' id='activador"+indice+"' class='btn btn-outline-danger btn-sm'>Rechazar Primer Orden</button>";
		} else {
			contCelda4 += " <button type='button' id='activador"+indice+"' class='btn btn-outline-success btn-sm'>Activar Primer Orden</button>";
		}
		if(objeto.segundoOrdenActivo) {
			contCelda4 += " <button type='button' id='activador"+indice+"' class='btn btn-outline-danger btn-sm'>Rechazar Segundo Orden</button>";
		} else {
			contCelda4 += " <button type='button' id='activador"+indice+"' class='btn btn-outline-success btn-sm'>Activar Segundo Orden</button>";
		}
		celda4.innerHTML = contCelda4;
	}
});

tabla.addEventListener('click', (event) => {
	const isButton = event.target.nodeName === 'BUTTON';
	if (!isButton) {
	return;
	}

	if (event.target.classList.contains("cambio")) {
		cambia_orden(event.target.id);
	}
})

function cambia_orden(id) {
	var id = id.slice(11);
	var celda1 = document.getElementById('tr'+id).cells[1].innerHTML;
	var celda2 = document.getElementById('tr'+id).cells[2].innerHTML;
	var celdaTemp = "";
	celdaTemp = document.getElementById('tr'+id).cells[1].innerHTML;
	document.getElementById('tr'+id).cells[1].innerHTML = document.getElementById('tr'+id).cells[2].innerHTML;
	document.getElementById('tr'+id).cells[2].innerHTML = celdaTemp;
}

</script>

<!-- JS bundle de Bootstrap -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.min.js" integrity="sha384-fbbOQedDUMZZ5KreZpsbe1LCZPVmfTnH7ois6mU1QK+m14rQ1l2bGBq41eYeM/fS" crossorigin="anonymous"></script>

</body>
</html>
